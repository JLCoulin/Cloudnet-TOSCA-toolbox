# A.16-01.yaml
tosca_definitions_version: tosca_simple_yaml_1_3
  #...


imports: ### added
  - etsi_nfv_sol001_vnfd_types.yaml  # all of TOSCA VNFD types as defined in ETSI GSÂ NFV-SOL 001

node_types:
  tosca.nodes.nfv.exampleVNF:
    derived_from: tosca.nodes.nfv.VNF
    # omitted for brevity



topology_template: ### added
#

 node_templates: ### moved left
#...
  VduwithTrunk:
    type:  tosca.nodes.nfv.Vdu.Compute
    properties:
      name: VduwithTrunk
      description: compute node with trunk port
      vdu_profile: ### added all remaining lines
        min_number_of_instances: 3
        max_number_of_instances: 4
    capabilities:
        virtual_compute:
          properties:
            virtual_memory:
              virtual_mem_size: 8192 MiB
            virtual_cpu:
              num_virtual_cpu: 2

      # omitted for brevity

  TrunkParentPort:
    type: tosca.nodes.nfv.VduCp
    properties:
      layer_protocols: [ ipv4 ] ### added
      trunk_mode: true
      # omitted for brevity
    capabilities:
#      trunk_binding: # ERROR: map expected!
       trunk_binding: {}
    requirements:
      - virtual_binding: VduwithTrunk
      - virtual_link: intVL1

  TrunkSubPort1:
    type: tosca.nodes.nfv.VduSubCp
    properties:
      layer_protocols: [ ipv4 ] ### added
      # omitted for brevity
      segmentation_type: vlan
      segmentation_id: 10
    requirements:
      - trunk_binding: TrunkParentPort
      - virtual_link: intVL2

  TrunkSubPort2:
    type: tosca.nodes.nfv.VduSubCp
    properties:
      layer_protocols: [ ipv4 ] ### added
      # omitted for brevity
      segmentation_type: vlan
      segmentation_id: 100
    requirements:
      - trunk_binding: TrunkParentPort
      - virtual_link: intVL3

  intVL1:
    type: tosca.nodes.nfv.VnfVirtualLink ###added   type: tosca.nodes.nfv.VnfVirtualLink ###added all remaining lines
    properties:
        connectivity_type:
          layer_protocols: [ ipv4 ]
        vl_profile:
          max_bitrate_requirements:
            root: 100000
            leaf: 20000
          min_bitrate_requirements:
            root: 10000
            leaf: 10000
    # omitted for brevity
  intVL2:
    type: tosca.nodes.nfv.VnfVirtualLink ###added   type: tosca.nodes.nfv.VnfVirtualLink ###added all remaining lines
    properties:
        connectivity_type:
          layer_protocols: [ ipv4 ]
        vl_profile:
          max_bitrate_requirements:
            root: 100000
            leaf: 20000
          min_bitrate_requirements:
            root: 10000
            leaf: 10000
    # omitted for brevity


  intVL3:
    type: tosca.nodes.nfv.VnfVirtualLink ###added   type: tosca.nodes.nfv.VnfVirtualLink ###added all remaining lines
    properties:
        connectivity_type:
          layer_protocols: [ ipv4 ]
        vl_profile:
          max_bitrate_requirements:
            root: 100000
            leaf: 20000
          min_bitrate_requirements:
            root: 10000
            leaf: 10000
    # omitted for brevity

  #...
